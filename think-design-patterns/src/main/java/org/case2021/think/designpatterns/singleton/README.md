# 单例模式

## 为什么要用单例？
- 单例设计模式（Singleton Design Pattern）理解起来非常简单。一个类只允许创建一个对象（或者实例），那这个类就是一个单例类，这种设计模式就叫作单例设计模式，简称单例模式。
- 1.解决线程并发问题  2.资源节约（比如一个配置文件要加载到内存中以对象的方式进行存储，那么这种是不会变的，理所应当是个单例
、递增ID生成器也同样理所当然是个单例）

## 单例实现几大要素
- 1、构造函数必须是private访问权限，避免被new创建
- 2、考虑对象创建时的安全问题
- 3、考虑是否需要支持延迟加载
- 4、考虑getInstance()的性能是否高（主要是要不要加锁）

## 单例有哪些实现方式 
- 1、饿汉式：不支持延迟加载；但是为什么延迟加载？如果这个单列初始化的时间比较长那么当需要的时候在初始化创建可能会导致请求超时，
那放在程序启动就加载岂不是更适合？（fail-fast原则，有问题提前暴露）
- 2、懒汉式：和饿汉式是反的，在第一次用的时候在初始化创建
- 3、加锁（延迟加载）、串行/双重检查锁（并发稍好，写法复杂）、双重检查锁优化写法（减少一次主存访问，通过申明局部变量临时存储instance且直接返回局部变量）
- 4、静态内部类
- 5、枚举
## 单例存在哪些问题？
- 对OOP特性支持不友好
- 单例会隐藏类之间的依赖关系
- 单例对代码的扩展性不友好
- 单例的可测试性不友好
- 单例不支持有参数的构造函数

## 单例与静态类的区别？
- 静态类不支持延迟加载

## 有何替代的解决方案？
- 工厂模式、IOC容器（用容器保证对象只有一个也行）

## 总结
- 模式没有对错，关键看你用在什么场景下，什么场景下用单例模式比用那种方式实现单例更加值得思考
